# # GitLab CI Job Templates
#
# These templates can be used to execute jobs on different runners.
# 
# Use GitLab's "include" keyword to include this file and the "extends" to
# extend a template below.
#
# For more details, see https://docs.gitlab.com/ee/ci/yaml/README.html#using-extends-and-include-together

.template_deploy_branch:
    stage: deploy

    # and folder "VadereModelTests" into one ZIP file.
    # Pass GitLab CI variables (like below) to create filenames for JAR files and final ZIP file.
    script:
        - export
        - mvn clean
        - mvn -Dmaven.test.skip=true package
        - python3 -m zipfile -c ${VADERE_PACKAGE_NAME}.zip VadereModelTests/ VadereGui/target/vadere.jar VadereSimulator/target/vadere-console.jar
        - scp vadere.${VADERE_PACKAGE_NAME}.zip di49mur@webdev-mwn.lrz.de:~/webserver/htdocs/builds/branches/vadere.${VADERE_PACKAGE_NAME}.zip
    when: manual
